from azure.identity import DefaultAzureCredential
from openai import AzureOpenAI

client = AzureOpenAI(
    api_version="2024-10-21",
    azure_endpoint="https://<your-endpoint>.openai.azure.com/",
    azure_deployment="gpt-4",  # try guessing here
    azure_ad_token_provider=DefaultAzureCredential()
)

response = client.chat.completions.create(
    model="gpt-4",
    messages=[{"role": "user", "content": "Hello!"}]
)

print(response.choices[0].message.content)
